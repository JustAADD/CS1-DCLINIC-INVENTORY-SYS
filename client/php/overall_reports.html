<?php

require '../../connection/connection.php';

?>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Overall Reports</title>

  <link rel="stylesheet" href="../css/style.css">

  <!-- Boxiocns CDN Link -->
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>

<body style="overflow: auto;">
  <section class="creports">
    <div class="card" id="creports">
      <div class="row">
        <div class="col">
          <img src="../image/dalino_logo.png" alt="" style="width: 80px; height: 80px;">

        </div>
        <div class="col" style="text-align: center;">
          <p>Dental Dalino Clinic</p>
          <p>Overall Reports</p>

        </div>
        <div class="col">

        </div>
      </div>

      <!-- The appointment schedule -->
      <table class="table mt-5">
        <thead table-light>
          <tr>
          <tr>
            <th scope="col" class="payment-process-description">The Appointment records</th>
          </tr>
          <th scope="col" class="payment-process-description">Patient name</th>
          <th scope="col" class="payment-process-description">Transaction no</th>
          <th scope="col" class="payment-process-description">Services</th>
          <th scope="col" class="payment-process-description">Payment</th>
          <th scope="col" class="payment-process-description">Time</th>
          <th scope="col" class="payment-process-description">Date</th>
          </tr>
        </thead>
        <tbody>


          <?php
          require '../../connection/connection.php';

          // Use placeholders to prevent SQL injection
          $selectQuery = "SELECT * FROM app_final_process";
          $stmt = mysqli_prepare($con, $selectQuery);
          mysqli_stmt_execute($stmt);
          $result = mysqli_stmt_get_result($stmt);

          echo "<table>
       
        <tbody>";

          if ($result) {
            // Fetch and display each record
            while ($row = mysqli_fetch_assoc($result)) {
              $transac = $row['transac_no'];
              $patient_name = $row['patient_name'];
              $selectedProcedures = $row['selectedProcedures'];
              $payment = $row['payment'];
              $session_time = $row['session_time'];
              $session_date = $row['date'];

              echo "<tr>
               
                <td>{$patient_name}</td>
                <td>{$transac}</td>
                <td>{$selectedProcedures}</td>
                <td>{$payment}</td>
                <td>{$session_time}</td>
                <td>{$session_date}</td>
              </tr>";
            }
          } else {
            echo "Error in query: " . mysqli_error($con);
          }

          echo "</tbody></table>";

          mysqli_close($con);
          ?>

        </tbody>
      </table>


      <!-- The patient records -->
      <table class="table mt-5">
        <thead table-light>
          <tr>
          <tr>
            <th scope="col" class="payment-process-description">The Patient list</th>
          </tr>
          <th scope="col" class="payment-process-description">#</th>
          <th scope="col" class="payment-process-description">Name</th>
          <th scope="col" class="payment-process-description">Email</th>
          <th scope="col" class="payment-process-description">Contact</th>
          <th scope="col" class="payment-process-description">Gender</th>
          </tr>
        </thead>
        <tbody>


          <?php
          require '../../connection/connection.php';

          // Use placeholders to prevent SQL injection
          $selectQuery = "SELECT * FROM patient_list";
          $stmt = mysqli_prepare($con, $selectQuery);
          mysqli_stmt_execute($stmt);
          $result = mysqli_stmt_get_result($stmt);

          echo "<table>
       
        <tbody>";

          if ($result) {
            // Fetch and display each record
            while ($row = mysqli_fetch_assoc($result)) {
              $patient_id = $row['patient_id'];
              $patient_name = $row['patient_name'];
              $email = $row['email'];
              $contact = $row['contact'];
              $gender = $row['gender'];
              $services = $row['dental_services'];
              $session_date = $row['date'];

              echo "<tr>
              
              <td>{$patient_id}</td>
                <td>{$patient_name}</td>
                <td>{$email}</td>
                <td>{$contact}</td>
                <td>{$gender}</td>
              
              </tr>";
            }
          } else {
            echo "Error in query: " . mysqli_error($con);
          }

          echo "</tbody></table>";

          mysqli_close($con);
          ?>

        </tbody>
      </table>


      <!-- The inventory records -->
      <table class="table mt-5">
        <thead table-light>
          <tr>
          <tr>
            <th scope="col" class="payment-process-description">Inventory</th>
          </tr>
          <th scope="col" class="payment-process-description">#</th>
          <th scope="col" class="payment-process-description">Name</th>
          <th scope="col" class="payment-process-description">Stocks</th>
          <th scope="col" class="payment-process-description">Class</th>
          <th scope="col" class="payment-process-description">Date</th>
          </tr>
        </thead>
        <tbody>


          <?php
          require '../../connection/connection.php';

          // Use placeholders to prevent SQL injection
          $selectQuery = "SELECT * FROM inventory";
          $stmt = mysqli_prepare($con, $selectQuery);
          mysqli_stmt_execute($stmt);
          $result = mysqli_stmt_get_result($stmt);

          echo "<table>
       
        <tbody>";

          if ($result) {
            // Fetch and display each record
            while ($row = mysqli_fetch_assoc($result)) {
              $inv_id = $row['inv_id'];
              $name = $row['name'];
              $stocks = $row['stocks'];
              $class = $row['class'];
              $session_date = $row['date'];

              echo "<tr>
              
              <td>{$inv_id}</td>
                <td>{$name}</td>
                <td>{$stocks}</td>
                <td>{$class}</td>
                <td>{$session_date}</td>
              
              </tr>";
            }
          } else {
            echo "Error in query: " . mysqli_error($con);
          }

          echo "</tbody></table>";

          mysqli_close($con);
          ?>

        </tbody>
      </table>




      <!-- The transaction -->
      <table class="table mt-5">
        <thead table-light>
          <tr>
          <tr>
            <th scope="col" class="payment-process-description">Transaction</th>
          </tr>
            <th scope="col" class="payment-process-description">#</th>
            <th scope="col" class="payment-process-description">Name</th>
            <th scope="col" class="payment-process-description">Services</th>
            <th scope="col" class="payment-process-description">Payment</th>
            <th scope="col" class="payment-process-description">date</th>
          </tr>
        </thead>
        <tbody>


          <?php
          require '../../connection/connection.php';

          // Use placeholders to prevent SQL injection
          $selectQuery = "SELECT * FROM patient_transaction";
          $stmt = mysqli_prepare($con, $selectQuery);
          mysqli_stmt_execute($stmt);
          $result = mysqli_stmt_get_result($stmt);

          echo "<table>
       
        <tbody>";

          if ($result) {
            // Fetch and display each record
            while ($row = mysqli_fetch_assoc($result)) {
              $transac = $row['transac_no'];
              $name = $row['patient_name'];
              $procedures = $row['selectedProcedures'];
              $payment = $row['payment'];
              $session_date = $row['date'];

              echo "<tr>
              
              <td>{$transac}</td>
                <td>{$name}</td>
                <td>{$procedures}</td>
                <td>{$payment}</td>
                <td>{$session_date}</td>
              
              </tr>";
            }
          } else {
            echo "Error in query: " . mysqli_error($con);
          }

          echo "</tbody></table>";

          mysqli_close($con);
          ?>

        </tbody>
      </table>


    </div>
  </section>






  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>


</body>

</html>